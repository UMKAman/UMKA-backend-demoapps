<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Master.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Master.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Master.js
 *
 * @description :: TODO: You might write a short summary of how this model works and what it represents here.
 * @docs        :: http://sailsjs.org/documentation/concepts/models-and-orm/models
 */

/**
 * @namespace Master
 * @prop {model} user user model, uniq, required
 * @prop {string} minCost  минимальная стоимость услуги
 * @prop {string} lon  долгота
 * @prop {string} lat  широта
 * @prop {string} address  Адрес мастера
 * @prop {float} averageRating  средний рейтинг
 * @prop {integer} voices  количество оставивших оценку
 * @prop {boolean} visit  может приехать
 * @prop {boolean} atHome  принимает у себя
 * @prop {enum} YO Юридиское образование (ЮЛ или ФЛ)
 * @prop {collection} specializations Специализации
 * @prop {collection} reviews Отзывы
 * @prop {collection} portfolios Портфолио
 * @prop {collection} workdays Рабочие дни
 * @prop {collection} inFavorite в избранном пользователей
 * @prop {collection} services услуги мастера
 */
module.exports = {
  attributes: {
    filledUser: function () {
      return User.findOne({ id: this.user }).populateAll().then(finded => {
        return finded;
      })
    },  
    user: { model: 'user', unique: true, required: true },
    YO: { type: 'string', enum: ['ЮЛ', 'ФЛ'] },
    voices: { type: 'integer' },
    ratingsAndCounts: { type: 'json' },
    lon: { type: 'string' },
    lat: { type: 'string' },
    address: { type: 'string' },
    averageRating: { type: 'float' },
    minCost: { type: 'string' },
    atHome: { type: 'boolean' },
    visit: { type: 'boolean' },
    specializations: {
      collection: 'specialization',
      via: 'inMaster',
      dominant: true,
    },
    reviews: {
      collection: 'review',
      via: 'master',
    },
    portfolios: {
      collection: 'portfolio',
      via: 'master',
    },
    workdays: {
      collection: 'workday',
      via: 'master',
    },
    inFavorite: {
      collection: 'user',
      via: 'favorite'
    },
    services: {
      collection: 'masterservice',
      via: 'master',
    },
    withUser: function () {
      return User.findOne({ id: this.user }).then(user => {
        var x = this.toObject();
        x.user = user.toObject();
        return x;
      })
    }
  },

};

</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="Chat.html">Chat</a></li><li><a href="Currency%2520.html">Currency </a></li><li><a href="FireToken.html">FireToken</a></li><li><a href="Jwt.html">Jwt</a></li><li><a href="Master.html">Master</a></li><li><a href="Messages.html">Messages</a></li><li><a href="Order.html">Order</a></li><li><a href="PortfolioPic.html">PortfolioPic</a></li><li><a href="Protfolio.html">Protfolio</a></li><li><a href="Review.html">Review</a></li><li><a href="serviceMaster.html">serviceMaster</a></li><li><a href="Sms.html">Sms</a></li><li><a href="Specialization.html">Specialization</a></li><li><a href="User.html">User</a></li><li><a href="Workday.html">Workday</a></li><li><a href="Workhour.html">Workhour</a></li></ul><h3>Global</h3><ul><li><a href="global.html#_">_</a></li><li><a href="global.html#admin">admin</a></li><li><a href="global.html">checkCode</a></li><li><a href="global.html">checkSMSCode</a></li><li><a href="global.html#generateNewSMS">generateNewSMS</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Mon May 29 2017 20:41:39 GMT+0700 (+07)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
